html
  head
    link(rel="stylesheet" href="/css/bootstrap.min.css")
    link(rel="stylesheet" href="/css/main.css")
    script(src="/js/renderer.js")
    script(src="/js/renderManager.js")
    script(src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous")
  body
    .container
      .game-area
        .play
        button(type="button" class="btn btn-lg autoplay-button") Autoplay
        p Left and right arrows to step, spacebar to toggle autoplay.

  script.
    $(function() {
      var game = !{game};
      var $play = $('.play');
      var renderer = new window.qc.Renderer($play, game);
      window.manager = new window.qc.RenderManager(renderer);

      $(window).keydown(function(e) {
        if(e.keyCode == 37) {
          manager.stepGame(-1);
        } else if(e.keyCode == 39) {
          manager.stepGame(1);
        } else if(e.keyCode == 32) {
          $('.autoplay-button').click();
        }
      });

      $('.autoplay-button').click(function(e) {
        $(this).toggleClass('on');

        if(manager.playing) {
          manager.cancelPlayback();
        } else {
          manager.playByTime(200, true);
        }

      });

      //manager.playByTime(200);
    });
