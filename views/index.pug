extends layout.pug

block content
  .container
    table(class="table")
      thead
        tr
          th GameId
          th Player 0 Id
          th Player 1 Id
          th Is Player 0 first?
          th Board Heights
          th winCondition
          th moves
          th View game
          th Game
      tbody
      each game in games
        tr
          td= game.gameId
          td= game.player0Id
          td= game.player1Id
          td= game.isPlayer0First
          td= game.boardHeights
          td= game.winCondition
          td= game.moves
          td <a href="/preview/#{game.gameId}">Link</a>
          td
            .play(id="game-" + game.gameId)

  script.
    $(function() {
      var games = [!{gameStates}];
      var maxDimension = 100;

      games.forEach(function(game, i) {
        var $play = $(`.play#game-${game.gameId}`);
        var renderer = new window.qc.Renderer($play, maxDimension, game);
        var manager = new window.qc.RenderManager(renderer);
        manager.playByTime(200, true);
      });
    });
